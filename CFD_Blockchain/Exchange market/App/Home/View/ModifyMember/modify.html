<include file="App/Home/View/Public/header.html"/>
<!--top end-->
<div class="ybc_section">
    <ul class="ybc_user_nav clearfix Font18">
        <li class="current"><span>1</span>Email registration</li>
        <li class="current" id="currentpwd"><span>2</span>Set transaction password</li>
        <li class="current"><span>3</span>Real-name authentication</li>
        <li><span>4</span>Registration success</li>
    </ul>
    <div class="ybc_warn Font18">To ensure the safety of your funds, please use Real-name authentication</div>
    <form id="form" method="post"  jump-url="{:U('Reg/regSuccess')}"  action="{:U('ModifyMember/modify')}">
        <div class="ybc_userarea ybc_userarea2" style="margin-bottom:50px;">
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label for="nick">Nickname</label></div>
                <div class="ybc_text left"><input name="nick" id="nick" value="" type="text"></div>
                <div class="ybc_hint left"><strong class="msg_i">i</strong><span id="nickmsg"><font style="color:red">Please input your nickname</font></span></div>
            </div>
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label for="name">Real name</label></div>
                <div class="ybc_text left"><input name="name" id="name" value="" onkeyup="value=value.replace(/[^\D]/g,'');" autocomplete="off" maxlength="8" type="text"></div>
                <div class="ybc_hint left"><strong class="msg_i">i</strong><span id="namemsg">Real name can not be changed after setting, and shoudl be the same as withdrawal account name</span></div>
            </div>
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label for="cardtype">ID type</label></div>
                <div class="ybc_text left">
                    <select id="cardtype" name="cardtype">
                        <option value="1" selected="selected">Driver license</option>
                        <option value="2">Passport</option>
                        <option value="3">Health card</option>
                        <option value="4">other</option>
                    </select>
                </div>
            </div>
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label for="idcard">ID Number</label></div>
                <div class="ybc_text left"><input name="idcard" id="idcard" value="" type="text"></div>
                <div class="ybc_hint left"><strong class="msg_i">i</strong><span id="idcardmsg">ID Number can not be modified after registration</span></div>
            </div>
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label for="mo">cellphone number</label></div>
                <div class="ybc_text left" style=" line-height:30px; width:209px;">
                    <input name="phone" id="mo" value="" type="text">
                </div>
                <div class="ybc_hint left">
                    <strong class="msg_i">i</strong>
                    <span id="momsg">Please input your cellphone number</span>
                </div>
            </div>
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label for="code">Verification code</label></div>
                <div class="ybc_text left"><input name="code" id="code" value="" type="text"></div>
                <div class="ybc_hint left"><input type="button" class="button" value="Click to send" id="msgt" data-key='on' onclick="sandPhone()"></div>
            </div>
            <!--<input id="avatar" name="avatar" value="/images/ulogodefault.jpg" type="hidden">-->
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label>&nbsp;</label></div>
                <div class="ybc_text left"><input value="Submit" class="ybc_next" type="button" onclick="valiForms()"></div>
            </div>
        </div>
        <div style="font-size:14px; padding-left:180px; line-height:24px; color:#666; margin-bottom:30px;">
            <p>1.Real name will not be able to change after Real-name authentication. Please fill in correctly.</p>
            <p>2.{$config.name|default='lemonthy'}Only accept real-name recharges, bank and other name information must be consistent with your certification name.</p>
            <p>3.{$config.name|default='lemonthy'}When there are reasonable grounds for suspecting that users provide false identity information, they have the right to refuse registration or to freeze or cancel registered accounts and assets.</p>
        </div>
    </form>
</div>
<script type="text/javascript" src="__PUBLIC__/Home/js/city.js"></script>
<script type="text/javascript">
    $("document").ready(function(){
        initProvinceCity($("#p1"),$("#c1"));
    });
</script>
<script type="text/javascript" src="__PUBLIC__/Home/js/ajaxfileupload.js"></script>
<script charset="utf-8" src="__PUBLIC__/Home/js/kindeditor-min.js"></script>
<script charset="utf-8" src="__PUBLIC__/Home/js/zh_CN.js"></script>
<script src="__PUBLIC__/Home/js/form.js"></script>
<script>
    vali = {name: 0, nick: 0, idcard: 0,phone:0};
    $('#name').bind('blur', function(){
        if($(this).val().length < 2) return validateMsg('name', 'Please input your Real name', 0);
        return validateMsg('name', '', vali.name = 1);
    });
    $('#nick').bind('blur', function(){
        if($(this).val().length < 2) {
            vali.nick = 0;
            return validateMsg('nick', 'Please input your Nickname', 0);
        }
        $.get("{:U('ModifyMember/ajaxCheckNick')}",{nick:encodeURIComponent($(this).val())}, function(d){
            validateMsg('nick', d['msg'], d['status']);
            if(d.status==1){
                vali.nick = d['status'];
            }
        }, 'json');

    });

    $('#mo').bind('blur', function(){
        if($(this).val().length != 11) {
            vali.phone = 0;
            return validateMsg('mo', 'Please input cellphone number', 0);
        }
        $.get("{:U('ModifyMember/ajaxCheckPhone')}" ,{phone:encodeURIComponent($(this).val())}, function(d){
            validateMsg('mo', d['msg'], d['status']);
            vali.phone = d['status'];
        }, 'json');
    });
    $('#idcard').bind('blur', function(){
        if($('#cardtype').val() == 1){
            if($(this).val().length < 13) return validateMsg('idcard', 'Please enter the correct Driver license', 0);
        }else{
            if($(this).val().length < 7) return validateMsg('idcard', 'Please enter the correct Passport number', 0);
        }
        return validateMsg('idcard', '', vali.idcard = 1);
    });
    function sandPhone(){
        var i=120;
        var tid2;
        tid2=setInterval(function(){
            if($("#msgt").attr("data-key")=='off'){
                $("#msgt").attr("disabled",true);
               // $("#msgt").removeClass("class");
               // $("#msgt").addClass("button again");
                i--;
                $("#msgt").val(i+" seconds can be resent");
                if(i<=0){
				//	$("#msgt").removeClass("class");
				//	$("#msgt").addClass("button");
                    $("#msgt").removeAttr("disabled").val("resent Verification code");
					$("#msgt").attr("data-key","on");
                }
            }
        },1000);
		var phone = $("mo").val();
        if(phone && /\(?([0-9]{3})\)?([ .-]?)([0-9]{3})\2([0-9]{4})/.test(phone)){
            layer.msg("Please fill in the correct cellphone number");
        }else{
            $.post("{:U('ModifyMember/ajaxSandPhone')}",{phone:encodeURIComponent($("#mo").val())},
                    function(d){
                       layer.msg(d.info);				   
                        if(d.status==1){	
                            i=120;
                            $("#msgt").attr("data-key","off");
                        }
                    });
        }
    }
    function valiForms(){
        if(vali.nick==0){
            $('#nick').focus();
            return false;
        }
        if(vali.name==0){
            $('#name').focus();
            return false;
        }
        if(vali.idcard==0){
            $('#idcard').focus();
            return false;
        }
        if(vali.phone==0){
            $('#mo').focus();
            return false;
        }
        else{
            $('#form').submit();
        }
    }
    $("#form").validate({
        rules: {
        },
        messages: {
        },
        submitHandler:function(form){
            ajax_submit_form(form)
            return false;
        },
        invalidHandler: function() {  //不通过回调
            return false;
        }
    });
    //kind editor
    var editor;
    KindEditor.ready(function(K) {
        editor = K.create('textarea[name="description"]', {
            resizeType : 1,
            allowPreviewEmoticons : false,
            allowImageUpload : false,
            items : [
                'source', 'fontname', 'fontsize', 'forecolor','|',  'bold', 'link', '|', 'justifyleft', 'justifycenter', 'justifyright' ],
            colorTable : [
                ['#FF0000', '#E56600', '#FF9900', '#64451D', '#DFC5A4', '#FFE500'],
                ['#009900', '#006600', '#99BB00', '#B8D100', '#60D978', '#00D5FF'],
                ['#337FE5', '#003399', '#4C33E5', '#9933E5', '#CC33E5', '#EE33EE'],
                ['#FFFFFF', '#CCCCCC', '#999999', '#666666', '#333333', '#000000']
            ]
        });
    });
</script>


<!--  暂时不用 手机验证 -->
<!---<script type="text/javascript" src="__PUBLIC__/Home/js/phonecode.js"></script>-->
<!--footer start-->
<include file="App/Home/View/Public/footer.html"/>
<!--footer end-->
<script type="text/javascript" src="__PUBLIC__/Home/js/downList.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/js/sdmenu.js"></script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?0ab4db557b96d841137861e0740d1e0a";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


</body></html>