<include file="App/Home/View/Public/header.html"/>
<!--top end-->

<style type="text/css">
.ybc_header {
    width: 1000px;
    height: 70px;
    margin: 10px auto;
}
.main{ width:100%; background-color:#fff; min-height:550px; _height:550px;font-size:12px; color:#666; font-family:"Microsoft Yahei";}
.main_box{ width:1000px; margin:0 auto;
    min-height: 400px;
	padding:30px;
	padding-top:0;
	border: 1px solid #e1e1df;
	background-color: #fbfaf8;
	margin-left: 100px;}
.warning {
    line-height: 24px;
    margin-bottom: 10px;
    color: #333;
    font-size: 14px;
    word-break: break-all;
	margin-top:0px;

 
}
.warning h2{  height:60px; line-height:60px; border-bottom:1px solid #e1e1df; width:100%; text-align:center; margin-bottom:20px;color:#333; font-weight:normal;}
.warning h3{  height:40px;  line-height:40px;width:100%; margin-top:20px;color:#333;font-weight:normal;}

.ybc_label{ width:380px; height:30px; line-height:30px; text-align:right; padding-right:5px;}
.ybc_user2 {
    margin-bottom: 20px;
    margin-top: 50px;
	height:20px;

}
.ybc_user1 {
    margin-bottom: 20px;
    margin-top: 30px;

	height:40px;

}

.left {
    float: left;
}
.ybc_text .ybc_next {
    width: 204px;
    text-align: center;
    height: 40px;
    line-height: 40px;
    background: #f70;
    color: #fff;
    font-size: 16px;
    font-family: 'Microsoft Yahei';
    border: 0;
    padding: 0;
    cursor: pointer;
}
.clearfix {
    zoom: 1;
}
.ybc_hint1 {
    height: 30px;
    line-height: 30px;
    color: #999;
	margin-left:15px;
}
.tycolor {
color: #2471cb; 
    text-decoration: underline;
}
</style>
<div class="main" id="reg-prev">
	<div class="main_box">
		<div class="warning">
			<h2>Risk warning</h2>
			{$config.reg_risk_warning}
		</div>
		<div class="ybc_user2 clearfix">
			<div class="ybc_text left"><input name="agree" id="tongyi" type="checkbox" onclick="xuanzhong()"></div>
			<div class="ybc_hint left"><label for="tongyi">I have carefully read the above risk tips and have agreed {$config.name} <a href="{:U('Reg/terms')}" id="agreement" class="tycolor"> Terms of Service </a>， Agree to participate in transactions at your own risk and expense
</label></div>
			<div class="ybc_hint left"><span id="agree"></span></div>
		</div>
		<div class="ybc_user1 clearfix">
			<div class="ybc_label left"><label>&nbsp;</label></div>
			<div class="ybc_text left"><input value="Next" id="next-btn" class="ybc_next" style="background-color:#e1e1e1; " type="submit"></div>
			<div class="ybc_hint1 left"><span id="agree"> <a href="{:U('Index/index')}" class="tycolor">Cancel</a></span></div>
		</div>
	</div>
</div>

<div class="ybc_section" id="reg-now" style="display:none;">
    <ul class="ybc_user_nav clearfix Font18">
        <li class="current"><span>1</span>Email registration</li>
        <li id="currentpwd"><span>2</span>Set transaction password</li>
        <li><span>3</span>Real-name authentication</li>
        <li><span>4</span>Registration success</li>
    </ul>
    <form class="ybc_userarea" id="ttttform" method="post" jump-url="{:U('Reg/regSuccess')}" action="{:U('Reg/addReg')}" onsubmit="return step2();">
        <div id="step1">
            <!--<div class="ybc_user clearfix">
                <div class="ybc_label left"><label for="pid">Invitation code</label></div>
                <div class="ybc_text left"><input type='text' name='pid' value="0"></div>
            </div>-->
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label for="email">Email</label></div>
                <div class="ybc_text left"><input name="email" id="email" type="text"></div>
                <div class="ybc_hint left"><strong class="msg_i" id="email_msg">i</strong><span id="emailmsg">Please enter your email for login and retrieve password</span></div><!--default class="msg_i"  right class="msg_error"  wrong class="msg_ok"-->
            </div>
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label for="pwd">logon password</label></div>
                <div class="ybc_text left"><input id="pwd" name="pwd" type="password"></div>
                <div class="ybc_hint left"><strong class="msg_i" id="pwd_msg">i</strong><span id="pwdmsg">Password length 6-20</span></div>
            </div>
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label for="repwd">Repeat password</label></div>
                <div class="ybc_text left"><input id="repwd" name="repwd" type="password"></div>
                <div class="ybc_hint left"><strong class="msg_i" id="repwd_msg">i</strong><span id="repwdmsg">Repeatedly enter the password twice to be consistent</span></div>
            </div>
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label for="pid">Invitation code</label></div>
                <div class="ybc_text left"><input name="pid" <if condition="$pid">value="{$pid}" readonly="readonly"</if>  type="text"></div>
                <div class="left" style="color:#f00; line-height:30px;">Optional items</div>
            </div>
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label>&nbsp;</label></div>
                <div class="ybc_text left"></div>
               
                <div class="ybc_hint left"><span id="agree"></span></div>
            </div>
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label>&nbsp;</label></div>
                <div class="ybc_text left"><input value="Next" class="ybc_next" onclick="step1()" type="button"></div>
            </div>
        </div>
        <div id="step2" style="display:none">
            <div class="ybc_warn Font16" style="background:none; margin:-40px 0 60px 0;"><span class="msg_warn">！</span>To protect your funds, set transaction password. 				<br>When you invest, trade, and transfer your account assets, you need to use a transaction password. Remember to keep it in mind.</div>
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label for="pwdtrade">transaction password</label></div>
                <div class="ybc_text left"><input id="pwdtrade" name="pwdtrade" type="password"></div>
                <div class="ybc_hint left"><strong class="msg_i" id="pwdtrade_msg">i</strong><span id="pwdtrademsg">Please enter the transaction password, not the same as the logon password</span></div>
            </div>
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label for="repwdtrade">Repeat transaction password</label></div>
                <div class="ybc_text left"><input id="repwdtrade" name="repwdtrade" type="password"></div>
                <div class="ybc_hint left"><strong class="msg_i" id="repwdtrade_msg">i</strong><span id="repwdtrademsg">Repeat input transaction password, need to be consistent twice</span></div>
            </div>
            <div class="ybc_user clearfix">
                <div class="ybc_label left"><label>&nbsp;</label></div>
                <div class="ybc_text left"><input value="Next" class="ybc_next" type="submit"></div>
            </div>
        </div>
    </form>
</div>
<script src="__PUBLIC__/Home/js/form.js"></script>
<script type="text/javascript">
    vali = {email: 0, pwd: 0, repwd: 0,tongyi:1};
    valistep2 = {pwdtrade: 0, repwdtrade: 0}
    $('#email').bind('blur', function(){
        var path_Email = "{:U('Reg/ajaxCheckEmail')}";
        $.get(path_Email,{email:encodeURIComponent($(this).val())}, function(d){
            if(d['status'] == 1){
                $('#email_msg').html("√");
                $('#email_msg').css('msg_ok');
            }else{
                $('#email_msg').html("×");
                $('#email_msg').css('msg_error');
            }
            validateMsg('email', d['msg'], d['status']);
            vali.email = d['status'];
        }, 'json');
    });

    $('#pwd').bind('blur', function(){
        var pLen = $(this).val().length;
        if(pLen < 6 || pLen > 20) {
            $('#pwd_msg').html("×");
            $('#pwd_msg').css('msg_error');
            return validateMsg('pwd', 'Password length between 6-20 characters', 0);
        }
        $('#pwd_msg').html("√");
        $('#pwd_msg').css('msg_ok');
        return validateMsg('pwd', '', vali.pwd = 1);
    });
    $('#repwd').bind('blur', function(){
        var pLen = $(this).val().length;
        if(pLen < 6 || pLen > 20){
            $('#repwd_msg').html("×");
            $('#repwd_msg').css('msg_error');
            return validateMsg('repwd', 'Password length between 6-20 characters', 0);
        }
        if($('#pwd').val() != $('#repwd').val()){
            $('#repwd_msg').html("×");
            $('#repwd_msg').css('msg_error');
            return validateMsg('repwd', 'The password is inconsistent. Please re-enter it.', 0);
        }
        $('#repwd_msg').html("√");
        $('#repwd_msg').css('msg_ok');
        return validateMsg('repwd', '', vali.repwd = 1);
    });
    $('#pwdtrade').bind('blur', function(){
        var pLen = $(this).val().length;
        var repLen = $('#repwdtrade').val().length;
        if(pLen < 6 || pLen > 20) {
            $('#pwdtrade_msg').html("×");
            $('#pwdtrade_msg').css('msg_error');
            return validateMsg('pwdtrade', 'Password length between 6-20 characters', 0);
        }
        if($('#pwdtrade').val() == $('#pwd').val()){
            $('#pwdtrade_msg').html("×");
            $('#pwdtrade_msg').css('msg_error');
            return validateMsg('pwdtrade', 'Transaction password cannot be same as logon password', 0);
        }
        if(repLen>1){
            if($('#pwdtrade').val() != $('#repwdtrade').val()){
                $('#repwdtrade_msg').html("×");
                $('#repwdtrade_msg').css('msg_error');
                return validateMsg('repwdtrade', 'The entered transaction password is inconsistent', 0);
            }
        }
        $('#pwdtrade_msg').html("√");
        $('#pwdtrade_msg').css('msg_ok');
        return validateMsg('pwdtrade', '', valistep2.pwdtrade = 1);
    });
    $('#repwdtrade').bind('blur', function(){
        var pLen = $(this).val().length;
        if(pLen < 6 || pLen > 20){
            $('#repwdtrade_msg').html("×");
            $('#repwdtrade_msg').css('msg_error');
            return validateMsg('repwdtrade', 'Password length between 6-20 characters', 0);
        }
        if($('#repwdtrade').val() != $('#pwdtrade').val()){
            $('#repwdtrade_msg').html("×");
            $('#repwdtrade_msg').css('msg_error');
            return validateMsg('repwdtrade', 'The password is inconsistent. Please re-enter it.', 0);
        }
        $('#repwdtrade_msg').html("√");
        $('#repwdtrade_msg').css('msg_ok');
        return validateMsg('repwdtrade', '', valistep2.repwdtrade = 1);
    });
    $("#tongyi").bind('click',function(){
        if($(this).val() == 1)
            $(this).val(0);
        else
            $(this).val(1);
        if($(this).val() == 0){
            return validateMsg('agreemsg', 'You need to agree to the Terms of Service on this website before Next step', vali.tongyi = 0);
        }else{
            return validateMsg('agreemsg', '', vali.tongyi = 1);
        }
    });

    function step1(){
        //检查第一步是否有问题
        for(var i in vali){
            if(!vali[i]) {
                event.preventDefault();
                return false;
            }
        }
        $('#step1').hide()
        $('#step2').show();
        $('#currentpwd').addClass('current');

    }
    function step2()
    {
        if(valistep2.pwdtrade==0 || valistep2.repwdtrade==0){
            return false;
        }else{
            return true;
        }
    }
</script>


<script>
    $("#ttttform").validate({
        submitHandler:function(form){
            ajax_submit_form(form)
            return false;
        },
        invalidHandler: function() {  //不通过回调
            return false;
        }
    });
</script>
<script>
   	$('#tongyi').click(function() {
		var isAgree = $(this).attr('checked');
		if(isAgree) {
			$(this).removeAttr('checked');
			$('#next-btn').css({'background':'#e1e1e1'});
		} else {
			$(this).attr("checked",'true');
			$('#next-btn').css({'background':'#f60'});
		}
		
	});
	$('#next-btn').click(function() {
		var isAgree = $('#tongyi').attr('checked');
		if(isAgree) {
			$('#reg-prev').hide();
			$('#reg-now').show();
		}
	});
</script>

<!--footer start-->
<include file="App/Home/View/Public/footer.html"/>
<!--footer end-->